{"title":"hexo 调用share.js","slug":"hexo_share_to_wechat","date":"2018-11-24T09:39:56.000Z","updated":"2023-09-08T06:12:36.693Z","comments":true,"path":"api/articles/hexo_share_to_wechat.json","excerpt":null,"covers":["/.com//share.png"],"content":"<h1 id=\"序\"><a href=\"#序\" class=\"headerlink\" title=\"序\"></a>序</h1><p>我本来想做的分享按钮预期效果如下：<br><img src=\"/.com//share.png\" alt=\"分享图标\">,本来也打开了一个实现了该效果的个人网站，结果一不小心关掉了,然后就只能自己动手制作分享功能。</p>\n<h1 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h1><p>首先在<strong>themes\\next\\layout</strong>中新建一个文件<strong>socialshare.swig</strong><br>编辑内容如下</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=<span class=\"string\">&quot;../lib/jquery/index.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;link href=<span class=\"string\">&quot;https://cdn.bootcss.com/social-share.js/1.0.16/css/share.min.css&quot;</span> rel=<span class=\"string\">&quot;stylesheet&quot;</span>&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">&quot;https://cdn.bootcss.com/social-share.js/1.0.16/js/jquery.share.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt; var <span class=\"variable\">$config</span> = &#123;</span><br><span class=\"line\">      url                 : window.location.href,<span class=\"regexp\">//</span> 网址，默认使用 window.location.href</span><br><span class=\"line\">      source              : <span class=\"string\">&#x27;&#x27;</span>, <span class=\"regexp\">//</span> 来源（QQ空间会用到）, 默认读取head标签：&lt;meta name=<span class=\"string\">&quot;site&quot;</span> content=<span class=\"string\">&quot;http://overtrue&quot;</span> /&gt;</span><br><span class=\"line\">      title               : <span class=\"string\">&#x27;&#x27;</span>, <span class=\"regexp\">//</span> 标题，默认读取 document.title 或者 &lt;meta name=<span class=\"string\">&quot;title&quot;</span> content=<span class=\"string\">&quot;share.js&quot;</span> /&gt;</span><br><span class=\"line\">      description         : <span class=\"string\">&#x27;&#x27;</span>, <span class=\"regexp\">//</span> 描述, 默认读取head标签：&lt;meta name=<span class=\"string\">&quot;description&quot;</span> content=<span class=\"string\">&quot;PHP弱类型的实现原理分析&quot;</span> /&gt;</span><br><span class=\"line\">      image               : <span class=\"string\">&#x27;&#x27;</span>, <span class=\"regexp\">//</span> 图片, 默认取网页中第一个img标签</span><br><span class=\"line\">      sites               : [<span class=\"string\">&#x27;qzone&#x27;</span>, <span class=\"string\">&#x27;qq&#x27;</span>, <span class=\"string\">&#x27;weibo&#x27;</span>,<span class=\"string\">&#x27;wechat&#x27;</span>], <span class=\"regexp\">//</span> 启用的站点</span><br><span class=\"line\">      disabled            : [<span class=\"string\">&#x27;google&#x27;</span>, <span class=\"string\">&#x27;facebook&#x27;</span>, <span class=\"string\">&#x27;twitter&#x27;</span>], <span class=\"regexp\">//</span> 禁用的站点</span><br><span class=\"line\">      wechatQrcodeTitle   : <span class=\"string\">&#x27;微信扫一扫：分享&#x27;</span>, <span class=\"regexp\">//</span> 微信二维码提示文字</span><br><span class=\"line\">      wechatQrcodeHelper  : <span class=\"string\">&#x27;&lt;p&gt;微信里点“发现”，扫一下&lt;/p&gt;&lt;p&gt;二维码便可将本文分享至朋友圈。&lt;/p&gt;&#x27;</span>,</span><br><span class=\"line\">      target : <span class=\"string\">&#x27;_blank&#x27;</span> <span class=\"regexp\">//</span>打开方式</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  $(<span class=\"string\">&#x27;.social-share&#x27;</span>).share(<span class=\"variable\">$config</span>);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>然后找到<strong>themes\\next\\layout</strong>中的文件<strong>post.swig</strong>中的这部分代码</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;footer <span class=\"attribute\">class</span>=<span class=\"string\">&quot;post-footer&quot;</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>之前贴上以下代码</p>\n<figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.social_share and not is_index %&#125;</span><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\">   </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">include</span></span> &#x27;../_partials/share/socialshare.swig&#x27; %&#125;</span><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;social-share&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>  </span></span><br><span class=\"line\"><span class=\"language-xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>\n<p>在主题_config.yml文件中增加以下代码</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">social_share:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>保存修改后，然后hexo clean ，hexo g ，hexo d 即可看到点击效果。</p>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p>虽说分享功能不如我的预期完整,但是也是解决了baidu share组件和赞赏组件冲突的问题。<br>如果有时间,还有兴趣的时候会继续折腾Share.js这个组件。<br>然后希望有已经部署成功的人指点一二，不胜感激。</p>\n<h1 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h1><p>于2018年12月14日修正并解决了该问题。</p>\n<hr>\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><ul>\n<li><a href=\"https://www.oschina.net/p/share-js\">一键转发工具 Share.js</a></li>\n</ul>\n","more":"<h1 id=\"序\"><a href=\"#序\" class=\"headerlink\" title=\"序\"></a>序</h1><p>我本来想做的分享按钮预期效果如下：<br><img src=\"/.com//share.png\" alt=\"分享图标\">,本来也打开了一个实现了该效果的个人网站，结果一不小心关掉了,然后就只能自己动手制作分享功能。</p>\n<h1 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h1><p>首先在<strong>themes\\next\\layout</strong>中新建一个文件<strong>socialshare.swig</strong><br>编辑内容如下</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=<span class=\"string\">&quot;../lib/jquery/index.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;link href=<span class=\"string\">&quot;https://cdn.bootcss.com/social-share.js/1.0.16/css/share.min.css&quot;</span> rel=<span class=\"string\">&quot;stylesheet&quot;</span>&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">&quot;https://cdn.bootcss.com/social-share.js/1.0.16/js/jquery.share.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt; var <span class=\"variable\">$config</span> = &#123;</span><br><span class=\"line\">      url                 : window.location.href,<span class=\"regexp\">//</span> 网址，默认使用 window.location.href</span><br><span class=\"line\">      source              : <span class=\"string\">&#x27;&#x27;</span>, <span class=\"regexp\">//</span> 来源（QQ空间会用到）, 默认读取head标签：&lt;meta name=<span class=\"string\">&quot;site&quot;</span> content=<span class=\"string\">&quot;http://overtrue&quot;</span> /&gt;</span><br><span class=\"line\">      title               : <span class=\"string\">&#x27;&#x27;</span>, <span class=\"regexp\">//</span> 标题，默认读取 document.title 或者 &lt;meta name=<span class=\"string\">&quot;title&quot;</span> content=<span class=\"string\">&quot;share.js&quot;</span> /&gt;</span><br><span class=\"line\">      description         : <span class=\"string\">&#x27;&#x27;</span>, <span class=\"regexp\">//</span> 描述, 默认读取head标签：&lt;meta name=<span class=\"string\">&quot;description&quot;</span> content=<span class=\"string\">&quot;PHP弱类型的实现原理分析&quot;</span> /&gt;</span><br><span class=\"line\">      image               : <span class=\"string\">&#x27;&#x27;</span>, <span class=\"regexp\">//</span> 图片, 默认取网页中第一个img标签</span><br><span class=\"line\">      sites               : [<span class=\"string\">&#x27;qzone&#x27;</span>, <span class=\"string\">&#x27;qq&#x27;</span>, <span class=\"string\">&#x27;weibo&#x27;</span>,<span class=\"string\">&#x27;wechat&#x27;</span>], <span class=\"regexp\">//</span> 启用的站点</span><br><span class=\"line\">      disabled            : [<span class=\"string\">&#x27;google&#x27;</span>, <span class=\"string\">&#x27;facebook&#x27;</span>, <span class=\"string\">&#x27;twitter&#x27;</span>], <span class=\"regexp\">//</span> 禁用的站点</span><br><span class=\"line\">      wechatQrcodeTitle   : <span class=\"string\">&#x27;微信扫一扫：分享&#x27;</span>, <span class=\"regexp\">//</span> 微信二维码提示文字</span><br><span class=\"line\">      wechatQrcodeHelper  : <span class=\"string\">&#x27;&lt;p&gt;微信里点“发现”，扫一下&lt;/p&gt;&lt;p&gt;二维码便可将本文分享至朋友圈。&lt;/p&gt;&#x27;</span>,</span><br><span class=\"line\">      target : <span class=\"string\">&#x27;_blank&#x27;</span> <span class=\"regexp\">//</span>打开方式</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  $(<span class=\"string\">&#x27;.social-share&#x27;</span>).share(<span class=\"variable\">$config</span>);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>然后找到<strong>themes\\next\\layout</strong>中的文件<strong>post.swig</strong>中的这部分代码</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;footer <span class=\"attribute\">class</span>=<span class=\"string\">&quot;post-footer&quot;</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>之前贴上以下代码</p>\n<figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.social_share and not is_index %&#125;</span><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\">   </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">include</span></span> &#x27;../_partials/share/socialshare.swig&#x27; %&#125;</span><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;social-share&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>  </span></span><br><span class=\"line\"><span class=\"language-xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>\n<p>在主题_config.yml文件中增加以下代码</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">social_share:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>保存修改后，然后hexo clean ，hexo g ，hexo d 即可看到点击效果。</p>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p>虽说分享功能不如我的预期完整,但是也是解决了baidu share组件和赞赏组件冲突的问题。<br>如果有时间,还有兴趣的时候会继续折腾Share.js这个组件。<br>然后希望有已经部署成功的人指点一二，不胜感激。</p>\n<h1 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h1><p>于2018年12月14日修正并解决了该问题。</p>\n<hr>\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><ul>\n<li><a href=\"https://www.oschina.net/p/share-js\">一键转发工具 Share.js</a></li>\n</ul>\n","categories":[{"name":"Hexo教程","path":"api/categories/Hexo教程.json"}],"tags":[{"name":"hexo","path":"api/tags/hexo.json"},{"name":"朋友圈","path":"api/tags/朋友圈.json"}]}
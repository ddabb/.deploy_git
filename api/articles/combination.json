{"title":"m个球放到n个箱子中几种解法","slug":"combination","date":"2018-11-29T14:23:23.000Z","updated":"2023-09-08T06:12:36.689Z","comments":true,"path":"api/articles/combination.json","excerpt":null,"covers":["/.com//nine.png"],"content":"<h1 id=\"序\"><a href=\"#序\" class=\"headerlink\" title=\"序\"></a>序</h1><p>该文的诞生源于一个问题:<strong>斗地主有多少种牌型组合?</strong><br>众所周知,斗地主共54张牌分别给三个人20,17,17张牌，因为方块3和梅花3在斗地主中无区别，转化一下问题就是13种不同的颜色（不包括黑白）的球各4个,黑球，白球各1个,放到容积分别为20,17,17的三个箱子中有多少种方法？<br>第一想法是想到采取排列组合的方式去解，但是多久没有做排列组合的习题，我发现<strong>3红3黄3蓝1黑1白共11个球放到容积为5,3,3的三个箱子中,不考虑顺序总共有多少种方法？</strong>这个问题我都计算困难,该文简单讲一下该问题的两种解法。</p>\n<h1 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h1><h2 id=\"方案1：全排列\"><a href=\"#方案1：全排列\" class=\"headerlink\" title=\"方案1：全排列\"></a>方案1：全排列</h2><h3 id=\"方案1-1-考虑黑白球\"><a href=\"#方案1-1-考虑黑白球\" class=\"headerlink\" title=\"方案1.1 考虑黑白球\"></a>方案1.1 考虑黑白球</h3><p>假设11个球的颜色全不相同,则所有排列顺序是1~11的全排列是<strong>11!=39916800</strong>。<br>再假设1,4,7为红球,2,5,8为黄球,3,6,9为蓝球，10为黑球,11为白球。<br><font color=\"#FF0000\">也可以1,2,3为红球,4,5,6为黄球,7,8,9为蓝球，10为白球,11为黑球。给球编号是为了计算全排列方便。</font><br>以全排列元素中的一个<strong>链表X</strong>(全排列的取值之一) **{9,8,3,5,6,4,11,7,1,2,10}**为例,<br>可以分成 **{9,8,3,5,6}**和 **{4,11,7}**和 **{1,2,10}<strong>三组。<br>将每组数据中≤9的对3取余,结果变成了A:</strong>{0,2,0,2,0}<strong>和B:</strong>{1,1,11}<strong>和C:</strong>{1,2,10}**三组数据。<br>∵ 在箱子中 **{4,11,7}**和 <strong>{4,7,11}<strong>是等价的。<br>∴ A、B、C三组都需要排序，排序后为{0,0,0,2,2}，{1,1,11},{1,2,10}<br>∴</strong>{9,8,3,5,6,4,11,7,1,2,10}</strong> 表示A箱子有3个蓝球，2个黄球；B箱子有2个红球,1个白球；C箱子有1个红球,1个黄球,1个黑球。<br>∴链表X的表达式是0,0,0,2,2,1,1,11,1,2,10<br>∴将39916800链表的表达式去重就可以算出序中提到的问题的解为355个。  </p>\n<h3 id=\"方案1-2-先不考虑黑白球\"><a href=\"#方案1-2-先不考虑黑白球\" class=\"headerlink\" title=\"方案1.2 先不考虑黑白球\"></a>方案1.2 先不考虑黑白球</h3><p>∵黑球的可能位置只有3种,白球的可能位置也只有3种。<br>即黑白球都在A箱,都在B箱,都在C箱,分别在AC箱,分别在BC箱，分别在AB箱。<br>所有组合情况如下<br><img src=\"/.com//nine.png\" alt=\"黑白球位置组合\"><br>这样就只需要计算9的全排列<strong>9!=362880</strong>次数据。<br>计算方式如方案1.1,再次不再赘述。<br>结果依旧为355。<br>具体计算代码请参考<a href=\"https://github.com/ddabb/permutations/blob/master/Program.cs\">方案一代码</a></p>\n<h2 id=\"方案2：笛卡尔积\"><a href=\"#方案2：笛卡尔积\" class=\"headerlink\" title=\"方案2：笛卡尔积\"></a>方案2：笛卡尔积</h2><p>在不考虑各箱子容积的前提下；<br>每个球都有3个箱子可以选择，则11个球的位置有<strong>3的11次方=177147</strong>中可能性。<br>若箱子A,B,C编号为{1,2,3}。大小分别为{5,3,3}。<br>则第一个球和第二球的箱子可能组合是{1,2,3}和{1,2,3}的笛卡尔积  </p>\n<figure class=\"highlight dust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"template-variable\">&#123;   &#123;1,1&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;1,2&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;1,3&#125;</span><span class=\"language-xml\">,   </span><span class=\"template-variable\">&#123;2,1&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;2,2&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;2,3&#125;</span><span class=\"language-xml\">,   </span><span class=\"template-variable\">&#123;3,1&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;3,2&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;3,3&#125;</span><span class=\"language-xml\">  &#125;  </span></span><br></pre></td></tr></table></figure>\n\n<p>将每个球所有的可能性做笛卡尔积之后，会得到一个177147个<strong>元素个数为11的链表L</strong>的集合S。<br>若链表L中有5个元素1，有3个元素2，有3个元素3。则链表L符合球进入箱子的逻辑。否则不符合球进入箱子的逻辑。<br>假若链表L为{1,2,3,2,3,2,1,1,1,1,3}且11个球的顺序为<strong>红,红,红,黄,黄,黄,蓝,蓝,蓝,黑,白</strong><br>则箱子内的颜色情况如下:<br>A箱：红蓝蓝蓝黑<br>B箱：红黄蓝<br>C箱：红黄白<br>所以链表L的表示式为 A-红蓝蓝蓝黑 B-红黄蓝 C-红黄白<br>将所有符合进箱逻辑的链表的表达式算出来去重,算出来<strong>结果依旧为355。</strong><br>具体计算代码请参考<a href=\"https://github.com/ddabb/combination\">方案二代码</a>  </p>\n<blockquote>\n<p><strong><font color=\"#FF0000\">注意：相同颜色的球的顺序应该连在一起，否则箱子内的球需要再做一次排序去重。</font></strong>  </p>\n</blockquote>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p>该文是对排列组合知识的一个补充。如果有更好的解决m个不同颜色的球放到n个箱子中的更好的解法，欢迎留言或者直接联系我。<br>如果能有算出斗地主有多少种牌型组合的方法，则更希望能联系我。<br>方案2在箱子不够多,球不够多的情况下,的确是不错的一个计算方案。</p>\n<hr>\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><ul>\n<li><a href=\"https://www.cnblogs.com/localhost2016/p/8668355.html\">C# 用Linq的方式实现组合和笛卡尔积（支持泛型T）</a></li>\n<li><a href=\"https://blog.csdn.net/MaybeHelios/article/details/759315\">终于有个高效率的排列组合算法</a></li>\n<li><a href=\"https://www.60points.com/Fight-the-Landlord-Card-Type-Aanalysis/\">欢乐斗地主出牌方式统计</a></li>\n</ul>\n","more":"<h1 id=\"序\"><a href=\"#序\" class=\"headerlink\" title=\"序\"></a>序</h1><p>该文的诞生源于一个问题:<strong>斗地主有多少种牌型组合?</strong><br>众所周知,斗地主共54张牌分别给三个人20,17,17张牌，因为方块3和梅花3在斗地主中无区别，转化一下问题就是13种不同的颜色（不包括黑白）的球各4个,黑球，白球各1个,放到容积分别为20,17,17的三个箱子中有多少种方法？<br>第一想法是想到采取排列组合的方式去解，但是多久没有做排列组合的习题，我发现<strong>3红3黄3蓝1黑1白共11个球放到容积为5,3,3的三个箱子中,不考虑顺序总共有多少种方法？</strong>这个问题我都计算困难,该文简单讲一下该问题的两种解法。</p>\n<h1 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h1><h2 id=\"方案1：全排列\"><a href=\"#方案1：全排列\" class=\"headerlink\" title=\"方案1：全排列\"></a>方案1：全排列</h2><h3 id=\"方案1-1-考虑黑白球\"><a href=\"#方案1-1-考虑黑白球\" class=\"headerlink\" title=\"方案1.1 考虑黑白球\"></a>方案1.1 考虑黑白球</h3><p>假设11个球的颜色全不相同,则所有排列顺序是1~11的全排列是<strong>11!=39916800</strong>。<br>再假设1,4,7为红球,2,5,8为黄球,3,6,9为蓝球，10为黑球,11为白球。<br><font color=\"#FF0000\">也可以1,2,3为红球,4,5,6为黄球,7,8,9为蓝球，10为白球,11为黑球。给球编号是为了计算全排列方便。</font><br>以全排列元素中的一个<strong>链表X</strong>(全排列的取值之一) **{9,8,3,5,6,4,11,7,1,2,10}**为例,<br>可以分成 **{9,8,3,5,6}**和 **{4,11,7}**和 **{1,2,10}<strong>三组。<br>将每组数据中≤9的对3取余,结果变成了A:</strong>{0,2,0,2,0}<strong>和B:</strong>{1,1,11}<strong>和C:</strong>{1,2,10}**三组数据。<br>∵ 在箱子中 **{4,11,7}**和 <strong>{4,7,11}<strong>是等价的。<br>∴ A、B、C三组都需要排序，排序后为{0,0,0,2,2}，{1,1,11},{1,2,10}<br>∴</strong>{9,8,3,5,6,4,11,7,1,2,10}</strong> 表示A箱子有3个蓝球，2个黄球；B箱子有2个红球,1个白球；C箱子有1个红球,1个黄球,1个黑球。<br>∴链表X的表达式是0,0,0,2,2,1,1,11,1,2,10<br>∴将39916800链表的表达式去重就可以算出序中提到的问题的解为355个。  </p>\n<h3 id=\"方案1-2-先不考虑黑白球\"><a href=\"#方案1-2-先不考虑黑白球\" class=\"headerlink\" title=\"方案1.2 先不考虑黑白球\"></a>方案1.2 先不考虑黑白球</h3><p>∵黑球的可能位置只有3种,白球的可能位置也只有3种。<br>即黑白球都在A箱,都在B箱,都在C箱,分别在AC箱,分别在BC箱，分别在AB箱。<br>所有组合情况如下<br><img src=\"/.com//nine.png\" alt=\"黑白球位置组合\"><br>这样就只需要计算9的全排列<strong>9!=362880</strong>次数据。<br>计算方式如方案1.1,再次不再赘述。<br>结果依旧为355。<br>具体计算代码请参考<a href=\"https://github.com/ddabb/permutations/blob/master/Program.cs\">方案一代码</a></p>\n<h2 id=\"方案2：笛卡尔积\"><a href=\"#方案2：笛卡尔积\" class=\"headerlink\" title=\"方案2：笛卡尔积\"></a>方案2：笛卡尔积</h2><p>在不考虑各箱子容积的前提下；<br>每个球都有3个箱子可以选择，则11个球的位置有<strong>3的11次方=177147</strong>中可能性。<br>若箱子A,B,C编号为{1,2,3}。大小分别为{5,3,3}。<br>则第一个球和第二球的箱子可能组合是{1,2,3}和{1,2,3}的笛卡尔积  </p>\n<figure class=\"highlight dust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"template-variable\">&#123;   &#123;1,1&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;1,2&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;1,3&#125;</span><span class=\"language-xml\">,   </span><span class=\"template-variable\">&#123;2,1&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;2,2&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;2,3&#125;</span><span class=\"language-xml\">,   </span><span class=\"template-variable\">&#123;3,1&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;3,2&#125;</span><span class=\"language-xml\">,</span><span class=\"template-variable\">&#123;3,3&#125;</span><span class=\"language-xml\">  &#125;  </span></span><br></pre></td></tr></table></figure>\n\n<p>将每个球所有的可能性做笛卡尔积之后，会得到一个177147个<strong>元素个数为11的链表L</strong>的集合S。<br>若链表L中有5个元素1，有3个元素2，有3个元素3。则链表L符合球进入箱子的逻辑。否则不符合球进入箱子的逻辑。<br>假若链表L为{1,2,3,2,3,2,1,1,1,1,3}且11个球的顺序为<strong>红,红,红,黄,黄,黄,蓝,蓝,蓝,黑,白</strong><br>则箱子内的颜色情况如下:<br>A箱：红蓝蓝蓝黑<br>B箱：红黄蓝<br>C箱：红黄白<br>所以链表L的表示式为 A-红蓝蓝蓝黑 B-红黄蓝 C-红黄白<br>将所有符合进箱逻辑的链表的表达式算出来去重,算出来<strong>结果依旧为355。</strong><br>具体计算代码请参考<a href=\"https://github.com/ddabb/combination\">方案二代码</a>  </p>\n<blockquote>\n<p><strong><font color=\"#FF0000\">注意：相同颜色的球的顺序应该连在一起，否则箱子内的球需要再做一次排序去重。</font></strong>  </p>\n</blockquote>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p>该文是对排列组合知识的一个补充。如果有更好的解决m个不同颜色的球放到n个箱子中的更好的解法，欢迎留言或者直接联系我。<br>如果能有算出斗地主有多少种牌型组合的方法，则更希望能联系我。<br>方案2在箱子不够多,球不够多的情况下,的确是不错的一个计算方案。</p>\n<hr>\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><ul>\n<li><a href=\"https://www.cnblogs.com/localhost2016/p/8668355.html\">C# 用Linq的方式实现组合和笛卡尔积（支持泛型T）</a></li>\n<li><a href=\"https://blog.csdn.net/MaybeHelios/article/details/759315\">终于有个高效率的排列组合算法</a></li>\n<li><a href=\"https://www.60points.com/Fight-the-Landlord-Card-Type-Aanalysis/\">欢乐斗地主出牌方式统计</a></li>\n</ul>\n","categories":[{"name":"逻辑思维","path":"api/categories/逻辑思维.json"}],"tags":[{"name":"排列组合","path":"api/tags/排列组合.json"},{"name":"不同颜色","path":"api/tags/不同颜色.json"}]}
{"title":"重绘Panel边框线","slug":"Paint_Panel_Border","date":"2019-01-21T14:00:53.000Z","updated":"2023-09-08T06:12:36.673Z","comments":true,"path":"api/articles/Paint_Panel_Border.json","excerpt":null,"covers":["/.com//%E9%94%99%E8%AF%AF%E9%87%8D%E7%BB%98%E7%A4%BA%E4%BE%8B.png"],"content":"<h1 id=\"序\"><a href=\"#序\" class=\"headerlink\" title=\"序\"></a>序</h1><p>最近有一个需求,是重绘panel边框的颜色成指定的颜色,参考了网上的一些示例代码和结合实际情况,形成了自己的解决方案,以下是实现过程。</p>\n<h1 id=\"示例代码\"><a href=\"#示例代码\" class=\"headerlink\" title=\"示例代码\"></a>示例代码</h1><h2 id=\"边框绘制类\"><a href=\"#边框绘制类\" class=\"headerlink\" title=\"边框绘制类\"></a>边框绘制类</h2><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"doctag\">///</span> panel边框绘制类</span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title\">PanelBorderPainter</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Color _colorPanelBorder = Color.FromArgb(<span class=\"number\">215</span>, <span class=\"number\">215</span>, <span class=\"number\">215</span>); <span class=\"comment\">//d7d7d7</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"built_in\">int</span> BorderSize = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> 重绘panel的边框颜色</span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;para&gt;</span>Padding 需要设置为1,例如:panel.Padding = new System.Windows.Forms.Padding(1);<span class=\"doctag\">&lt;/para&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;para&gt;</span>默认颜色值是d7d7d7<span class=\"doctag\">&lt;/para&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;para&gt;</span>可以通过panel.Tag=Color.FromArgb(255, 0, 0)设置颜色为红色<span class=\"doctag\">&lt;/para&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span><span class=\"doctag\">&lt;para&gt;</span>注意:该Paint事件应置于InitializeComponent()之后实现,重新生成Designer.cs会导致代码丢失。<span class=\"doctag\">&lt;/para&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> </span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;sender&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;e&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">Paint</span>(<span class=\"params\"><span class=\"built_in\">object</span> sender, PaintEventArgs e</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (sender <span class=\"keyword\">is</span> Control control)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"meta\">#<span class=\"keyword\">region</span> panel颜色信息通过Tag传递</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (control.Tag != <span class=\"literal\">null</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (control.Tag <span class=\"keyword\">is</span> Color color)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    _colorPanelBorder = color;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">#<span class=\"keyword\">endregion</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            ButtonBorderStyle style = ButtonBorderStyle.Solid;</span><br><span class=\"line\">            ControlPaint.DrawBorder(e.Graphics, control.ClientRectangle,</span><br><span class=\"line\">                _colorPanelBorder, BorderSize, style,</span><br><span class=\"line\">                _colorPanelBorder, BorderSize, style,</span><br><span class=\"line\">                _colorPanelBorder, BorderSize, style,</span><br><span class=\"line\">                _colorPanelBorder, BorderSize, style);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"声明两个Panel\"><a href=\"#声明两个Panel\" class=\"headerlink\" title=\"声明两个Panel\"></a>声明两个Panel</h2><p><font color=\"#FF0000\">容器panelOuter包含panelInner</font></p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private System.Windows.Forms.Panel panelOuter<span class=\"comment\">;</span></span><br><span class=\"line\">private System.Windows.Forms.Panel panelInner<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"关键代码\"><a href=\"#关键代码\" class=\"headerlink\" title=\"关键代码\"></a>关键代码</h2><p>panelOuter</p>\n<figure class=\"highlight wren\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">panelOuter</span>.<span class=\"property\">Padding</span> <span class=\"operator\">=</span> <span class=\"variable\">new</span> <span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">Padding</span>(<span class=\"number\">1</span>); <span class=\"comment\">//Padding属性设置为1。</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">panelOuter</span>.<span class=\"property\">Anchor</span> <span class=\"operator\">=</span> ((<span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">AnchorStyles</span>)((((<span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">AnchorStyles</span>.<span class=\"property\">Top</span> <span class=\"operator\">|</span> <span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">AnchorStyles</span>.<span class=\"property\">Bottom</span>) </span><br><span class=\"line\">            <span class=\"operator\">|</span> <span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">AnchorStyles</span>.<span class=\"property\">Left</span>) </span><br><span class=\"line\">            <span class=\"operator\">|</span> <span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">AnchorStyles</span>.<span class=\"property\">Right</span>)));</span><br><span class=\"line\"> <span class=\"variable language_\">this</span>.<span class=\"property\">panelOuter</span>.<span class=\"property\">Controls</span>.<span class=\"property\">Add</span>(<span class=\"variable\">panelInner</span>); <span class=\"comment\">//必须</span></span><br></pre></td></tr></table></figure>\n\n<p>panelInner</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">this.panelInner.Dock</span> = System.Windows.Forms.DockStyle.Fill<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n<p>Form1构造函数</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Form1</span>()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    InitializeComponent();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.panelOuter.Paint += <span class=\"keyword\">new</span> PaintEventHandler(PanelBorderPainter.Paint);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"答疑\"><a href=\"#答疑\" class=\"headerlink\" title=\"答疑\"></a>答疑</h2><p><font color=\"#FF0000\">为什么需要两个Panel?</font><br>答:因为如果注释掉以下代码,水平拖拽时会出现如下的界面效果。</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.panelOuter.Controls.Add(panelInner);</span><br></pre></td></tr></table></figure>\n<p><img src=\"/.com//%E9%94%99%E8%AF%AF%E9%87%8D%E7%BB%98%E7%A4%BA%E4%BE%8B.png\" alt=\"错误重绘示例\"><br>取消该行代码注释则页面拖拽效果正常。</p>\n<p><font color=\"#FF0000\">是否必须需要两个Panel?</font><br>答:不是,内部是<strong>DataGridView</strong>等控件,其Dock&#x3D;DockStyle.Fill,可以起到同样的效果。</p>\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><ul>\n<li><a href=\"https://blog.csdn.net/softimite_zifeng/article/details/54237134\">Winform的Panel绘制边框</a></li>\n</ul>\n","more":"<h1 id=\"序\"><a href=\"#序\" class=\"headerlink\" title=\"序\"></a>序</h1><p>最近有一个需求,是重绘panel边框的颜色成指定的颜色,参考了网上的一些示例代码和结合实际情况,形成了自己的解决方案,以下是实现过程。</p>\n<h1 id=\"示例代码\"><a href=\"#示例代码\" class=\"headerlink\" title=\"示例代码\"></a>示例代码</h1><h2 id=\"边框绘制类\"><a href=\"#边框绘制类\" class=\"headerlink\" title=\"边框绘制类\"></a>边框绘制类</h2><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"doctag\">///</span> panel边框绘制类</span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title\">PanelBorderPainter</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Color _colorPanelBorder = Color.FromArgb(<span class=\"number\">215</span>, <span class=\"number\">215</span>, <span class=\"number\">215</span>); <span class=\"comment\">//d7d7d7</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"built_in\">int</span> BorderSize = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> 重绘panel的边框颜色</span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;para&gt;</span>Padding 需要设置为1,例如:panel.Padding = new System.Windows.Forms.Padding(1);<span class=\"doctag\">&lt;/para&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;para&gt;</span>默认颜色值是d7d7d7<span class=\"doctag\">&lt;/para&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;para&gt;</span>可以通过panel.Tag=Color.FromArgb(255, 0, 0)设置颜色为红色<span class=\"doctag\">&lt;/para&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span><span class=\"doctag\">&lt;para&gt;</span>注意:该Paint事件应置于InitializeComponent()之后实现,重新生成Designer.cs会导致代码丢失。<span class=\"doctag\">&lt;/para&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> </span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;sender&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;e&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">Paint</span>(<span class=\"params\"><span class=\"built_in\">object</span> sender, PaintEventArgs e</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (sender <span class=\"keyword\">is</span> Control control)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"meta\">#<span class=\"keyword\">region</span> panel颜色信息通过Tag传递</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (control.Tag != <span class=\"literal\">null</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (control.Tag <span class=\"keyword\">is</span> Color color)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    _colorPanelBorder = color;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">#<span class=\"keyword\">endregion</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            ButtonBorderStyle style = ButtonBorderStyle.Solid;</span><br><span class=\"line\">            ControlPaint.DrawBorder(e.Graphics, control.ClientRectangle,</span><br><span class=\"line\">                _colorPanelBorder, BorderSize, style,</span><br><span class=\"line\">                _colorPanelBorder, BorderSize, style,</span><br><span class=\"line\">                _colorPanelBorder, BorderSize, style,</span><br><span class=\"line\">                _colorPanelBorder, BorderSize, style);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"声明两个Panel\"><a href=\"#声明两个Panel\" class=\"headerlink\" title=\"声明两个Panel\"></a>声明两个Panel</h2><p><font color=\"#FF0000\">容器panelOuter包含panelInner</font></p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private System.Windows.Forms.Panel panelOuter<span class=\"comment\">;</span></span><br><span class=\"line\">private System.Windows.Forms.Panel panelInner<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"关键代码\"><a href=\"#关键代码\" class=\"headerlink\" title=\"关键代码\"></a>关键代码</h2><p>panelOuter</p>\n<figure class=\"highlight wren\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">panelOuter</span>.<span class=\"property\">Padding</span> <span class=\"operator\">=</span> <span class=\"variable\">new</span> <span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">Padding</span>(<span class=\"number\">1</span>); <span class=\"comment\">//Padding属性设置为1。</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">panelOuter</span>.<span class=\"property\">Anchor</span> <span class=\"operator\">=</span> ((<span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">AnchorStyles</span>)((((<span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">AnchorStyles</span>.<span class=\"property\">Top</span> <span class=\"operator\">|</span> <span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">AnchorStyles</span>.<span class=\"property\">Bottom</span>) </span><br><span class=\"line\">            <span class=\"operator\">|</span> <span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">AnchorStyles</span>.<span class=\"property\">Left</span>) </span><br><span class=\"line\">            <span class=\"operator\">|</span> <span class=\"title class_\">System</span>.<span class=\"property\">Windows</span>.<span class=\"property\">Forms</span>.<span class=\"property\">AnchorStyles</span>.<span class=\"property\">Right</span>)));</span><br><span class=\"line\"> <span class=\"variable language_\">this</span>.<span class=\"property\">panelOuter</span>.<span class=\"property\">Controls</span>.<span class=\"property\">Add</span>(<span class=\"variable\">panelInner</span>); <span class=\"comment\">//必须</span></span><br></pre></td></tr></table></figure>\n\n<p>panelInner</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">this.panelInner.Dock</span> = System.Windows.Forms.DockStyle.Fill<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n<p>Form1构造函数</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Form1</span>()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    InitializeComponent();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.panelOuter.Paint += <span class=\"keyword\">new</span> PaintEventHandler(PanelBorderPainter.Paint);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"答疑\"><a href=\"#答疑\" class=\"headerlink\" title=\"答疑\"></a>答疑</h2><p><font color=\"#FF0000\">为什么需要两个Panel?</font><br>答:因为如果注释掉以下代码,水平拖拽时会出现如下的界面效果。</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.panelOuter.Controls.Add(panelInner);</span><br></pre></td></tr></table></figure>\n<p><img src=\"/.com//%E9%94%99%E8%AF%AF%E9%87%8D%E7%BB%98%E7%A4%BA%E4%BE%8B.png\" alt=\"错误重绘示例\"><br>取消该行代码注释则页面拖拽效果正常。</p>\n<p><font color=\"#FF0000\">是否必须需要两个Panel?</font><br>答:不是,内部是<strong>DataGridView</strong>等控件,其Dock&#x3D;DockStyle.Fill,可以起到同样的效果。</p>\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><ul>\n<li><a href=\"https://blog.csdn.net/softimite_zifeng/article/details/54237134\">Winform的Panel绘制边框</a></li>\n</ul>\n","categories":[{"name":"代码世界","path":"api/categories/代码世界.json"},{"name":"winform","path":"api/categories/winform.json"}],"tags":[{"name":"winform","path":"api/tags/winform.json"},{"name":"panel重绘","path":"api/tags/panel重绘.json"}]}